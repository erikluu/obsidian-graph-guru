/*
THIS IS A GENERATED/BUNDLED FILE BY ESBUILD
if you want to view the source, please visit the github repository of this plugin
*/

var __defProp = Object.defineProperty;
var __getOwnPropDesc = Object.getOwnPropertyDescriptor;
var __getOwnPropNames = Object.getOwnPropertyNames;
var __hasOwnProp = Object.prototype.hasOwnProperty;
var __export = (target, all) => {
  for (var name in all)
    __defProp(target, name, { get: all[name], enumerable: true });
};
var __copyProps = (to, from, except, desc) => {
  if (from && typeof from === "object" || typeof from === "function") {
    for (let key of __getOwnPropNames(from))
      if (!__hasOwnProp.call(to, key) && key !== except)
        __defProp(to, key, { get: () => from[key], enumerable: !(desc = __getOwnPropDesc(from, key)) || desc.enumerable });
  }
  return to;
};
var __toCommonJS = (mod) => __copyProps(__defProp({}, "__esModule", { value: true }), mod);

// src/main.ts
var main_exports = {};
__export(main_exports, {
  ExampleModal: () => ExampleModal,
  GraphView: () => GraphView,
  VIEW_TYPE_GRAPH: () => VIEW_TYPE_GRAPH,
  default: () => GuruPlugin
});
module.exports = __toCommonJS(main_exports);
var import_obsidian = require("obsidian");
var import_child_process = require("child_process");
var GuruPlugin = class extends import_obsidian.Plugin {
  async onload() {
    await this.loadSettings();
    const files = await this.getAllVaultFiles();
    console.log(files);
    const preprocessedFiles = await this.sendToPythonScript(files);
    console.log(preprocessedFiles);
    this.registerView(
      VIEW_TYPE_GRAPH,
      (leaf) => new GraphView(leaf, files.length)
    );
    this.addRibbonIcon("citrus", "Activate Graph View", () => {
      console.log("lmao");
    });
    await this.loadSettings();
    this.addSettingTab(new GuruSettingTab(this.app, this));
    const statusBarItemEl = this.addStatusBarItem();
    statusBarItemEl.setText(`Graph Guru focused on ${files.length} files`);
  }
  onunload() {
    console.log("unloading plugin");
    this.app.workspace.detachLeavesOfType(VIEW_TYPE_GRAPH);
  }
  async activateView() {
    this.app.workspace.detachLeavesOfType(VIEW_TYPE_GRAPH);
    await this.app.workspace.getRightLeaf(false).setViewState({
      type: VIEW_TYPE_GRAPH,
      active: true
    });
    this.app.workspace.revealLeaf(
      this.app.workspace.getLeavesOfType(VIEW_TYPE_GRAPH)[0]
    );
  }
  async loadSettings() {
    this.settings = Object.assign({}, DEFAULT_SETTINGS, await this.loadData());
  }
  async saveSettings() {
    await this.saveData(this.settings);
  }
  // PREPROCESSING ------------------------------------------------
  async getAllVaultFiles() {
    const files = this.app.vault.getFiles();
    const fileObjects = files.map(async (f) => {
      const text = await this.app.vault.read(f);
      const metadata = this.app.metadataCache.getFileCache(f);
      let tags = null;
      if (metadata != null) {
        tags = (0, import_obsidian.getAllTags)(metadata);
      }
      return {
        text,
        metadata,
        tags
      };
    });
    return await Promise.all(fileObjects);
  }
  async sendToPythonScript(files) {
    return new Promise((resolve, reject) => {
      const pythonProcess = (0, import_child_process.spawn)("python", ["./src/preprocessing.py"]);
      const results = [];
      pythonProcess.stdout.on("data", (data) => {
        results.push(JSON.parse(data.toString()));
      });
      pythonProcess.stderr.on("data", (data) => {
        reject(data.toString());
      });
      pythonProcess.on("close", (code) => {
        if (code === 0) {
          resolve(results);
        } else {
          reject(`Python process exited with code ${code}`);
        }
      });
      for (const file of files) {
        pythonProcess.stdin.write(JSON.stringify(file) + "\n");
      }
      pythonProcess.stdin.end();
    });
  }
};
var VIEW_TYPE_GRAPH = "graph-view";
var GraphView = class extends import_obsidian.ItemView {
  constructor(leaf, numFiles) {
    super(leaf);
    this.numFiles = numFiles;
  }
  getViewType() {
    return VIEW_TYPE_GRAPH;
  }
  getDisplayText() {
    return "Graph View";
  }
  async onOpen() {
    const containerEl = this.containerEl.children[1];
    containerEl.empty();
    containerEl.createEl("h4", { text: `Number of Files Found: ${this.numFiles}` });
  }
  async onClose() {
  }
};
var ExampleModal = class extends import_obsidian.Modal {
  constructor(app, onSubmit) {
    super(app);
    this.onSubmit = onSubmit;
  }
  onOpen() {
    const { contentEl } = this;
    contentEl.createEl("h1", { text: "What's your name?" });
    new import_obsidian.Setting(contentEl).setName("Name").addText((text) => text.onChange((value) => {
      this.result = value;
    }));
    new import_obsidian.Setting(contentEl).addButton((btn) => btn.setButtonText("Submit").setCta().onClick(() => {
      this.close();
      this.onSubmit(this.result);
    }));
  }
  onClose() {
    const { contentEl } = this;
    contentEl.empty();
  }
};
var DEFAULT_SETTINGS = {
  focus_directory: "./",
  favorite_color: "Purple"
};
var GuruSettingTab = class extends import_obsidian.PluginSettingTab {
  constructor(app, plugin) {
    super(app, plugin);
    this.plugin = plugin;
  }
  display() {
    const { containerEl } = this;
    containerEl.empty();
    containerEl.createEl("h2", { text: "Graph Guru Settings" });
    new import_obsidian.Setting(containerEl).setName("Focus Directory").setDesc("Enter the directory you wish for The Guru to focus on.").addText((text) => text.setPlaceholder("Enter your directory").setValue(this.plugin.settings.focus_directory).onChange(async (value) => {
      console.log("Directory: " + value);
      this.plugin.settings.focus_directory = value;
      await this.plugin.saveSettings();
    }));
    new import_obsidian.Setting(containerEl).setName("Favorite Color").setDesc("Let us know your favorite color.").addText((text) => text.setPlaceholder("Enter color").setValue(this.plugin.settings.favorite_color).onChange(async (value) => {
      console.log("Color: " + value);
      this.plugin.settings.favorite_color = value;
      await this.plugin.saveSettings();
    }));
  }
};
//# sourceMappingURL=data:application/json;base64,ewogICJ2ZXJzaW9uIjogMywKICAic291cmNlcyI6IFsibWFpbi50cyJdLAogICJzb3VyY2VzQ29udGVudCI6IFsiaW1wb3J0IHsgQXBwLCBJdGVtVmlldywgV29ya3NwYWNlTGVhZiwgTW9kYWwsIFBsdWdpbiwgUGx1Z2luU2V0dGluZ1RhYiwgU2V0dGluZywgVEZpbGUsIENhY2hlZE1ldGFkYXRhLCBnZXRBbGxUYWdzIH0gZnJvbSAnb2JzaWRpYW4nO1xuaW1wb3J0IHsgc3Bhd24gfSBmcm9tICdjaGlsZF9wcm9jZXNzJztcblxuLy8gJSUlJSUlJSUlJSUlJSUlJSUlJSUlJSUlJSUlJSUlJSUlJSUlJSUlJSUlJSUlJSUlJSUlJSUlJSUlJSUlJSUlJSUlJSUlJSUlJSUlJVxuLy8gUGx1Z2luIE1haW5cbi8vICUlJSUlJSUlJSUlJSUlJSUlJSUlJSUlJSUlJSUlJSUlJSUlJSUlJSUlJSUlJSUlJSUlJSUlJSUlJSUlJSUlJSUlJSUlJSUlJSUlJSVcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgR3VydVBsdWdpbiBleHRlbmRzIFBsdWdpbiB7XG4gICAgc2V0dGluZ3M6IEd1cnVTZXR0aW5ncztcblxuICAgIGFzeW5jIG9ubG9hZCgpIHtcbiAgICAgICAgYXdhaXQgdGhpcy5sb2FkU2V0dGluZ3MoKTtcblxuICAgICAgICBjb25zdCBmaWxlcyA9IGF3YWl0IHRoaXMuZ2V0QWxsVmF1bHRGaWxlcygpO1xuICAgICAgICBjb25zb2xlLmxvZyhmaWxlcylcbiAgICAgICAgY29uc3QgcHJlcHJvY2Vzc2VkRmlsZXMgPSBhd2FpdCB0aGlzLnNlbmRUb1B5dGhvblNjcmlwdChmaWxlcyk7XG4gICAgICAgIGNvbnNvbGUubG9nKHByZXByb2Nlc3NlZEZpbGVzKTtcblxuICAgICAgICAvLyByZWdpc3RlciB2aWV3XG4gICAgICAgIHRoaXMucmVnaXN0ZXJWaWV3KFxuICAgICAgICAgICAgVklFV19UWVBFX0dSQVBILFxuICAgICAgICAgICAgKGxlYWYpID0+IG5ldyBHcmFwaFZpZXcobGVhZiwgZmlsZXMubGVuZ3RoKVxuICAgICAgICApO1xuXG4gICAgICAgIC8vIHJpYmJvbiBidXR0b25cbiAgICAgICAgdGhpcy5hZGRSaWJib25JY29uKFwiY2l0cnVzXCIsIFwiQWN0aXZhdGUgR3JhcGggVmlld1wiLCAoKSA9PiB7XG4gICAgICAgICAgICBjb25zb2xlLmxvZyhcImxtYW9cIilcbiAgICAgICAgfSlcblxuICAgICAgICAvLyBsb2FkIHNldHRpbmdzXG4gICAgICAgIGF3YWl0IHRoaXMubG9hZFNldHRpbmdzKCk7XG4gICAgICAgIHRoaXMuYWRkU2V0dGluZ1RhYihuZXcgR3VydVNldHRpbmdUYWIodGhpcy5hcHAsIHRoaXMpKVxuXG4gICAgICAgIC8vIFRoaXMgYWRkcyBhIHN0YXR1cyBiYXIgaXRlbSB0byB0aGUgYm90dG9tIG9mIHRoZSBhcHAuIERvZXMgbm90IHdvcmsgb24gbW9iaWxlIGFwcHMuXG4gICAgICAgIGNvbnN0IHN0YXR1c0Jhckl0ZW1FbCA9IHRoaXMuYWRkU3RhdHVzQmFySXRlbSgpO1xuICAgICAgICBzdGF0dXNCYXJJdGVtRWwuc2V0VGV4dChgR3JhcGggR3VydSBmb2N1c2VkIG9uICR7ZmlsZXMubGVuZ3RofSBmaWxlc2ApO1xuICAgIH1cblxuICAgIG9udW5sb2FkKCkge1xuICAgICAgICBjb25zb2xlLmxvZygndW5sb2FkaW5nIHBsdWdpbicpO1xuICAgICAgICB0aGlzLmFwcC53b3Jrc3BhY2UuZGV0YWNoTGVhdmVzT2ZUeXBlKFZJRVdfVFlQRV9HUkFQSCk7XG4gICAgfVxuXG4gICAgYXN5bmMgYWN0aXZhdGVWaWV3KCkge1xuICAgICAgICB0aGlzLmFwcC53b3Jrc3BhY2UuZGV0YWNoTGVhdmVzT2ZUeXBlKFZJRVdfVFlQRV9HUkFQSCk7XG5cbiAgICAgICAgYXdhaXQgdGhpcy5hcHAud29ya3NwYWNlLmdldFJpZ2h0TGVhZihmYWxzZSkuc2V0Vmlld1N0YXRlKHtcbiAgICAgICAgICAgIHR5cGU6IFZJRVdfVFlQRV9HUkFQSCxcbiAgICAgICAgICAgIGFjdGl2ZTogdHJ1ZSxcbiAgICAgICAgfSk7XG5cbiAgICAgICAgdGhpcy5hcHAud29ya3NwYWNlLnJldmVhbExlYWYoXG4gICAgICAgICAgICB0aGlzLmFwcC53b3Jrc3BhY2UuZ2V0TGVhdmVzT2ZUeXBlKFZJRVdfVFlQRV9HUkFQSClbMF1cbiAgICAgICAgKTtcbiAgICB9XG5cbiAgICBhc3luYyBsb2FkU2V0dGluZ3MoKSB7XG4gICAgICAgIHRoaXMuc2V0dGluZ3MgPSBPYmplY3QuYXNzaWduKHt9LCBERUZBVUxUX1NFVFRJTkdTLCBhd2FpdCB0aGlzLmxvYWREYXRhKCkpO1xuICAgIH1cblxuICAgIGFzeW5jIHNhdmVTZXR0aW5ncygpIHtcbiAgICAgICAgYXdhaXQgdGhpcy5zYXZlRGF0YSh0aGlzLnNldHRpbmdzKTtcbiAgICB9XG5cbiAgICAvLyBQUkVQUk9DRVNTSU5HIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuICAgIGFzeW5jIGdldEFsbFZhdWx0RmlsZXMoKSB7XG4gICAgICAgIGNvbnN0IGZpbGVzOiBURmlsZVtdID0gdGhpcy5hcHAudmF1bHQuZ2V0RmlsZXMoKTtcbiAgICAgICAgXG4gICAgICAgIGNvbnN0IGZpbGVPYmplY3RzID0gZmlsZXMubWFwKGFzeW5jIChmKSA9PiB7XG4gICAgICAgICAgICBjb25zdCB0ZXh0OiBzdHJpbmcgPSBhd2FpdCB0aGlzLmFwcC52YXVsdC5yZWFkKGYpO1xuICAgICAgICAgICAgY29uc3QgbWV0YWRhdGE6IENhY2hlZE1ldGFkYXRhIHwgbnVsbCA9IHRoaXMuYXBwLm1ldGFkYXRhQ2FjaGUuZ2V0RmlsZUNhY2hlKGYpO1xuICAgICAgICAgICAgbGV0IHRhZ3M6IHN0cmluZ1tdIHwgbnVsbCA9IG51bGxcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgaWYgKG1ldGFkYXRhICE9IG51bGwpIHtcbiAgICAgICAgICAgICAgICB0YWdzID0gZ2V0QWxsVGFncyhtZXRhZGF0YSk7ICAgIFxuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgIHRleHQ6IHRleHQsXG4gICAgICAgICAgICAgICAgbWV0YWRhdGE6IG1ldGFkYXRhLFxuICAgICAgICAgICAgICAgIHRhZ3M6IHRhZ3NcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG5cbiAgICAgICAgcmV0dXJuIGF3YWl0IFByb21pc2UuYWxsKGZpbGVPYmplY3RzKTtcbiAgICB9XG5cbiAgICBhc3luYyBzZW5kVG9QeXRob25TY3JpcHQoZmlsZXM6IFRGaWxlW10pOiBQcm9taXNlPHN0cmluZ1tdPiB7XG4gICAgICAgIHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XG4gICAgICAgICAgICBjb25zdCBweXRob25Qcm9jZXNzID0gc3Bhd24oJ3B5dGhvbicsIFsnLi9zcmMvcHJlcHJvY2Vzc2luZy5weSddKTtcbiAgICAgICAgICAgIGNvbnN0IHJlc3VsdHM6IHN0cmluZ1tdID0gW107XG5cbiAgICAgICAgICAgIHB5dGhvblByb2Nlc3Muc3Rkb3V0Lm9uKCdkYXRhJywgKGRhdGEpID0+IHtcbiAgICAgICAgICAgICAgICByZXN1bHRzLnB1c2goSlNPTi5wYXJzZShkYXRhLnRvU3RyaW5nKCkpKTsgLy8gbWF5YmUgbm90IHRvU3RyaW5nXG4gICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgcHl0aG9uUHJvY2Vzcy5zdGRlcnIub24oJ2RhdGEnLCAoZGF0YSkgPT4ge1xuICAgICAgICAgICAgICAgIHJlamVjdChkYXRhLnRvU3RyaW5nKCkpO1xuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIHB5dGhvblByb2Nlc3Mub24oJ2Nsb3NlJywgKGNvZGUpID0+IHtcbiAgICAgICAgICAgICAgICBpZiAoY29kZSA9PT0gMCkge1xuICAgICAgICAgICAgICAgICAgICByZXNvbHZlKHJlc3VsdHMpO1xuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIHJlamVjdChgUHl0aG9uIHByb2Nlc3MgZXhpdGVkIHdpdGggY29kZSAke2NvZGV9YCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIGZvciAoY29uc3QgZmlsZSBvZiBmaWxlcykge1xuICAgICAgICAgICAgICAgIHB5dGhvblByb2Nlc3Muc3RkaW4ud3JpdGUoSlNPTi5zdHJpbmdpZnkoZmlsZSkgKyAnXFxuJyk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHB5dGhvblByb2Nlc3Muc3RkaW4uZW5kKCk7XG4gICAgICAgIH0pO1xuICAgIH1cbn1cblxuLy8gJSUlJSUlJSUlJSUlJSUlJSUlJSUlJSUlJSUlJSUlJSUlJSUlJSUlJSUlJSUlJSUlJSUlJSUlJSUlJSUlJSUlJSUlJSUlJSUlJSUlJVxuLy8gVmlld1xuLy8gJSUlJSUlJSUlJSUlJSUlJSUlJSUlJSUlJSUlJSUlJSUlJSUlJSUlJSUlJSUlJSUlJSUlJSUlJSUlJSUlJSUlJSUlJSUlJSUlJSUlJVxuXG5leHBvcnQgY29uc3QgVklFV19UWVBFX0dSQVBIID0gXCJncmFwaC12aWV3XCI7XG5cbmV4cG9ydCBjbGFzcyBHcmFwaFZpZXcgZXh0ZW5kcyBJdGVtVmlldyB7XG4gICAgbnVtRmlsZXM6IG51bWJlcjtcblxuICAgIGNvbnN0cnVjdG9yKGxlYWY6IFdvcmtzcGFjZUxlYWYsIG51bUZpbGVzOiBudW1iZXIpIHtcbiAgICAgICAgc3VwZXIobGVhZik7XG4gICAgICAgIHRoaXMubnVtRmlsZXMgPSBudW1GaWxlcztcbiAgICB9XG5cbiAgICBnZXRWaWV3VHlwZSgpOiBzdHJpbmcge1xuICAgICAgICByZXR1cm4gVklFV19UWVBFX0dSQVBIO1xuICAgIH1cblxuICAgIGdldERpc3BsYXlUZXh0KCk6IHN0cmluZyB7XG4gICAgICAgIHJldHVybiBcIkdyYXBoIFZpZXdcIlxuICAgIH1cblxuICAgIGFzeW5jIG9uT3BlbigpIHtcbiAgICAgICAgY29uc3QgY29udGFpbmVyRWwgPSB0aGlzLmNvbnRhaW5lckVsLmNoaWxkcmVuWzFdO1xuICAgICAgICBjb250YWluZXJFbC5lbXB0eSgpO1xuICAgICAgICBjb250YWluZXJFbC5jcmVhdGVFbChcImg0XCIsIHsgdGV4dDogYE51bWJlciBvZiBGaWxlcyBGb3VuZDogJHt0aGlzLm51bUZpbGVzfWB9KTtcbiAgICB9XG5cbiAgICBhc3luYyBvbkNsb3NlKCkge1xuXG4gICAgfVxufVxuXG4vLyAlJSUlJSUlJSUlJSUlJSUlJSUlJSUlJSUlJSUlJSUlJSUlJSUlJSUlJSUlJSUlJSUlJSUlJSUlJSUlJSUlJSUlJSUlJSUlJSUlJSUlXG4vLyBNb2RhbFxuLy8gJSUlJSUlJSUlJSUlJSUlJSUlJSUlJSUlJSUlJSUlJSUlJSUlJSUlJSUlJSUlJSUlJSUlJSUlJSUlJSUlJSUlJSUlJSUlJSUlJSUlJVxuXG5leHBvcnQgY2xhc3MgRXhhbXBsZU1vZGFsIGV4dGVuZHMgTW9kYWwge1xuICAgIHJlc3VsdDogc3RyaW5nO1xuICAgIG9uU3VibWl0OiAocmVzdWx0OiBzdHJpbmcpID0+IHZvaWQ7XG4gIFxuICAgIGNvbnN0cnVjdG9yKGFwcDogQXBwLCBvblN1Ym1pdDogKHJlc3VsdDogc3RyaW5nKSA9PiB2b2lkKSB7XG4gICAgICBzdXBlcihhcHApO1xuICAgICAgdGhpcy5vblN1Ym1pdCA9IG9uU3VibWl0O1xuICAgIH1cbiAgXG4gICAgb25PcGVuKCkge1xuICAgICAgY29uc3QgeyBjb250ZW50RWwgfSA9IHRoaXM7XG4gIFxuICAgICAgY29udGVudEVsLmNyZWF0ZUVsKFwiaDFcIiwgeyB0ZXh0OiBcIldoYXQncyB5b3VyIG5hbWU/XCIgfSk7XG4gIFxuICAgICAgbmV3IFNldHRpbmcoY29udGVudEVsKVxuICAgICAgICAuc2V0TmFtZShcIk5hbWVcIilcbiAgICAgICAgLmFkZFRleHQoKHRleHQpID0+XG4gICAgICAgICAgdGV4dC5vbkNoYW5nZSgodmFsdWUpID0+IHtcbiAgICAgICAgICAgIHRoaXMucmVzdWx0ID0gdmFsdWVcbiAgICAgICAgICB9KSk7XG4gIFxuICAgICAgbmV3IFNldHRpbmcoY29udGVudEVsKVxuICAgICAgICAuYWRkQnV0dG9uKChidG4pID0+XG4gICAgICAgICAgYnRuXG4gICAgICAgICAgICAuc2V0QnV0dG9uVGV4dChcIlN1Ym1pdFwiKVxuICAgICAgICAgICAgLnNldEN0YSgpXG4gICAgICAgICAgICAub25DbGljaygoKSA9PiB7XG4gICAgICAgICAgICAgIHRoaXMuY2xvc2UoKTtcbiAgICAgICAgICAgICAgdGhpcy5vblN1Ym1pdCh0aGlzLnJlc3VsdCk7XG4gICAgICAgICAgICB9KSk7XG4gICAgfVxuICBcbiAgICBvbkNsb3NlKCkge1xuICAgICAgY29uc3QgeyBjb250ZW50RWwgfSA9IHRoaXM7XG4gICAgICBjb250ZW50RWwuZW1wdHkoKTtcbiAgICB9XG4gIH1cblxuLy8gJSUlJSUlJSUlJSUlJSUlJSUlJSUlJSUlJSUlJSUlJSUlJSUlJSUlJSUlJSUlJSUlJSUlJSUlJSUlJSUlJSUlJSUlJSUlJSUlJSUlJVxuLy8gU2V0dGluZ3Ncbi8vICUlJSUlJSUlJSUlJSUlJSUlJSUlJSUlJSUlJSUlJSUlJSUlJSUlJSUlJSUlJSUlJSUlJSUlJSUlJSUlJSUlJSUlJSUlJSUlJSUlJSVcblxuaW50ZXJmYWNlIEd1cnVTZXR0aW5ncyB7XG4gICAgZm9jdXNfZGlyZWN0b3J5OiBzdHJpbmc7XG4gICAgZmF2b3JpdGVfY29sb3I6IHN0cmluZztcbn1cblxuY29uc3QgREVGQVVMVF9TRVRUSU5HUzogR3VydVNldHRpbmdzID0ge1xuICAgIGZvY3VzX2RpcmVjdG9yeTogJy4vJyxcbiAgICBmYXZvcml0ZV9jb2xvcjogJ1B1cnBsZSdcbn0gXG5cbmNsYXNzIEd1cnVTZXR0aW5nVGFiIGV4dGVuZHMgUGx1Z2luU2V0dGluZ1RhYiB7XG4gICAgcGx1Z2luOiBHdXJ1UGx1Z2luO1xuXG4gICAgY29uc3RydWN0b3IoYXBwOiBBcHAsIHBsdWdpbjogR3VydVBsdWdpbikge1xuICAgICAgICBzdXBlcihhcHAsIHBsdWdpbik7XG4gICAgICAgIHRoaXMucGx1Z2luID0gcGx1Z2luO1xuICAgIH1cblxuICAgIGRpc3BsYXkoKTogdm9pZCB7XG4gICAgICAgIGNvbnN0IHtjb250YWluZXJFbH0gPSB0aGlzO1xuXG4gICAgICAgIGNvbnRhaW5lckVsLmVtcHR5KCk7XG5cbiAgICAgICAgY29udGFpbmVyRWwuY3JlYXRlRWwoJ2gyJywge3RleHQ6ICdHcmFwaCBHdXJ1IFNldHRpbmdzJ30pO1xuXG4gICAgICAgIG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKVxuICAgICAgICAgICAgLnNldE5hbWUoJ0ZvY3VzIERpcmVjdG9yeScpXG4gICAgICAgICAgICAuc2V0RGVzYygnRW50ZXIgdGhlIGRpcmVjdG9yeSB5b3Ugd2lzaCBmb3IgVGhlIEd1cnUgdG8gZm9jdXMgb24uJylcbiAgICAgICAgICAgIC5hZGRUZXh0KHRleHQgPT4gdGV4dFxuICAgICAgICAgICAgICAgIC5zZXRQbGFjZWhvbGRlcignRW50ZXIgeW91ciBkaXJlY3RvcnknKVxuICAgICAgICAgICAgICAgIC5zZXRWYWx1ZSh0aGlzLnBsdWdpbi5zZXR0aW5ncy5mb2N1c19kaXJlY3RvcnkpXG4gICAgICAgICAgICAgICAgLm9uQ2hhbmdlKGFzeW5jICh2YWx1ZSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygnRGlyZWN0b3J5OiAnICsgdmFsdWUpO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnBsdWdpbi5zZXR0aW5ncy5mb2N1c19kaXJlY3RvcnkgPSB2YWx1ZTtcbiAgICAgICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XG4gICAgICAgICAgICAgICAgfSkpO1xuICAgICAgICBcbiAgICAgICAgbmV3IFNldHRpbmcoY29udGFpbmVyRWwpXG4gICAgICAgICAgICAuc2V0TmFtZSgnRmF2b3JpdGUgQ29sb3InKVxuICAgICAgICAgICAgLnNldERlc2MoJ0xldCB1cyBrbm93IHlvdXIgZmF2b3JpdGUgY29sb3IuJylcbiAgICAgICAgICAgIC5hZGRUZXh0KHRleHQgPT4gdGV4dFxuICAgICAgICAgICAgICAgIC5zZXRQbGFjZWhvbGRlcignRW50ZXIgY29sb3InKVxuICAgICAgICAgICAgICAgIC5zZXRWYWx1ZSh0aGlzLnBsdWdpbi5zZXR0aW5ncy5mYXZvcml0ZV9jb2xvcilcbiAgICAgICAgICAgICAgICAub25DaGFuZ2UoYXN5bmMgKHZhbHVlKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCdDb2xvcjogJyArIHZhbHVlKTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5wbHVnaW4uc2V0dGluZ3MuZmF2b3JpdGVfY29sb3IgPSB2YWx1ZTtcbiAgICAgICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XG4gICAgICAgICAgICAgICAgfSkpO1xuICAgICAgICBcbiAgICB9XG59XG4iXSwKICAibWFwcGluZ3MiOiAiOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUEsc0JBQTBIO0FBQzFILDJCQUFzQjtBQU10QixJQUFxQixhQUFyQixjQUF3Qyx1QkFBTztBQUFBLEVBRzNDLE1BQU0sU0FBUztBQUNYLFVBQU0sS0FBSyxhQUFhO0FBRXhCLFVBQU0sUUFBUSxNQUFNLEtBQUssaUJBQWlCO0FBQzFDLFlBQVEsSUFBSSxLQUFLO0FBQ2pCLFVBQU0sb0JBQW9CLE1BQU0sS0FBSyxtQkFBbUIsS0FBSztBQUM3RCxZQUFRLElBQUksaUJBQWlCO0FBRzdCLFNBQUs7QUFBQSxNQUNEO0FBQUEsTUFDQSxDQUFDLFNBQVMsSUFBSSxVQUFVLE1BQU0sTUFBTSxNQUFNO0FBQUEsSUFDOUM7QUFHQSxTQUFLLGNBQWMsVUFBVSx1QkFBdUIsTUFBTTtBQUN0RCxjQUFRLElBQUksTUFBTTtBQUFBLElBQ3RCLENBQUM7QUFHRCxVQUFNLEtBQUssYUFBYTtBQUN4QixTQUFLLGNBQWMsSUFBSSxlQUFlLEtBQUssS0FBSyxJQUFJLENB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
